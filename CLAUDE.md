# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is n8n-context, a repository containing components for creating system prompts that help AI models generate n8n workflow JSON files. The repository focuses on providing structured context to neural networks for programmatic workflow creation rather than manual n8n interface usage.

## Key Architecture

### Component Structure
- `context/` - Core system prompt components (base-prompt.md, arch-patterns.md, step-by-step.md, ai-workflow-rules.md)
- `snippets/` - JSON examples for specific n8n node types (Switch, Merge, HTTP Request, Telegram, etc.)
- `workflows/` - Complete workflow JSON examples for reference
- `tools/` - Build utilities for generating unified system prompts

### Context Building System
The repository uses a modular approach where context components are combined into a unified system prompt:
1. Base prompt with n8n fundamentals
2. AI workflow rules and guidelines
3. Architectural patterns for workflow construction
4. Optional step-by-step instructions
5. JSON snippets for specific nodes
6. Complete workflow examples

## Common Commands

### Build System Prompt
```bash
# Build with default settings (2 workflow examples)
node tools/context-builder.js

# Build with custom workflow count
node tools/context-builder.js 5

# Build with step-by-step instructions
node tools/context-builder.js 3 --steps

# Use the npm script
npm run build
```

### Custom Output Filename
```bash
# Build with custom filename
node tools/context-builder.js --filename custom-context.md

# Build with workflow count and custom filename
node tools/context-builder.js 5 --steps --filename my-context.md
```

## Working with Components

### Context Files
All files in `context/` directory are components for building unified system prompts and should not be used independently. They work together to provide comprehensive n8n workflow generation guidance.

### Snippets
JSON snippets in `snippets/` represent specific node configurations and should be used as reference when building workflows. Each snippet file contains examples for a particular node type.

### Workflows
Complete workflow files in `workflows/` serve as comprehensive examples. Many are real-world workflows demonstrating various n8n automation patterns including AI agents, data processing, and integrations.

## Output Files

- `dist/full-context.md` - Generated by tools/context-builder.js (default output)
- `dist/custom-context.md` - Generated with custom filename parameter
- All output files contain the complete system prompt for AI workflow generation

## Development Notes

The ContextBuilder class in `tools/context-builder.js` is the main utility for combining components. It supports configurable workflow example counts and optional step-by-step instruction inclusion.

## System Prompt for Claude Code

The system prompt for Claude Code is derived from the unified system prompt generated by tools/context-builder.js. It provides guidance for AI models to generate n8n workflow JSON files.

### Priority Data Sources for Workflow Generation

**IMPORTANT: When building n8n workflows, prioritize information sources in this order:**

1. **Generated system prompt** (`dist/arch.md`) - Use as the primary reference for:
   - Node configurations and patterns
   - Workflow architectural examples
   - JSON structure and best practices
   - Tested and validated approaches

2. **Repository components** - Reference specific parts when needed:
   - `context/` files for foundational knowledge
   - `snippets/` for node-specific configurations
   - `workflows/` for complete workflow examples

3. **n8n MCP tools validation** - Always validate against current n8n instance when available

4. **General n8n documentation** - Use only as supplementary reference

### Working with the Generated Context

- The generated system prompt contains curated, tested patterns that should guide workflow construction
- Always check the generated context first before building new workflows
- Use the repository examples as templates and modify them for specific use cases
- Follow the architectural patterns established in the context components

This approach ensures consistency and reliability when generating n8n workflow JSON files.
